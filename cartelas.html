<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>Compra de Cartelas</title>

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: radial-gradient(circle at top, #2b0000, #000);
  color: #fff;
}

.container {
  max-width: 1200px;
  margin: auto;
  padding: 20px;
}

h1, h2 {
  text-align: center;
  color: gold;
}

input, button {
  padding: 10px;
  margin: 5px 0;
  width: 100%;
  border-radius: 8px;
  border: none;
}

button {
  background: gold;
  font-weight: bold;
  cursor: pointer;
}

.hidden { display: none; }

.grid {
  display: grid;
  grid-template-columns: repeat(10, 1fr);
  gap: 8px;
}

.numero {
  background: #222;
  border: 2px solid gold;
  padding: 12px;
  text-align: center;
  border-radius: 8px;
  cursor: pointer;
}

.numero.sel {
  background: gold;
  color: #000;
}

.cartela {
  margin-top: 15px;
  background: rgba(255,255,255,0.1);
  padding: 10px;
  border-radius: 10px;
}

.cartela span {
  background: gold;
  color: #000;
  padding: 6px 10px;
  border-radius: 20px;
  margin: 3px;
  display: inline-block;
}

.carrinho {
  margin-top: 20px;
  background: rgba(0,0,0,0.6);
  padding: 15px;
  border-radius: 10px;
}
</style>
</head>

<body>

<div class="container">

<h1>Bingo Online</h1>

<!-- CADASTRO -->
<div id="cadastro">
  <h2>Cadastro</h2>
  <input id="nome" placeholder="Nome completo">
  <input id="celular" placeholder="Celular">
  <input id="cpf" placeholder="CPF">
  <label>
    <input type="checkbox" id="maior"> Declaro ser maior de 18 anos
  </label>
  <button onclick="validarCadastro()">Continuar</button>
</div>

<!-- ESCOLHA -->
<div id="escolha" class="hidden">
  <h2>Como deseja sua cartela?</h2>
  <button onclick="modoManual()">Escolher números</button>
  <button onclick="modoAutomatico()">Gerar automática</button>
</div>

<!-- MANUAL -->
<div id="manual" class="hidden">
  <h2>Escolha 30 números</h2>
  <div class="grid" id="grid"></div>
  <p id="cont">0 / 30</p>
  <button onclick="salvarCartela()">Adicionar ao carrinho</button>
</div>

<!-- CARRINHO -->
<div class="carrinho hidden" id="carrinho">
  <h2>Carrinho</h2>
  <div id="lista"></div>
  <button onclick="finalizar()">Finalizar Compra</button>
</div>

</div>

<script>
const TOTAL = 30;
let selecionados = [];
let carrinho = [];

function validarCadastro() {
  if (!nome.value || !celular.value || !cpf.value || !maior.checked) {
    alert("Preencha tudo e confirme ser maior de 18");
    return;
  }
  localStorage.setItem("cliente", JSON.stringify({
    nome: nome.value,
    celular: celular.value,
    cpf: cpf.value
  }));
  cadastro.classList.add("hidden");
  escolha.classList.remove("hidden");
}

function modoManual() {
  escolha.classList.add("hidden");
  manual.classList.remove("hidden");
  criarGrid();
}

function criarGrid() {
  grid.innerHTML = "";
  for (let i = 1; i <= 75; i++) {
    const d = document.createElement("div");
    d.className = "numero";
    d.innerText = i;
    d.onclick = () => toggleNumero(i, d);
    grid.appendChild(d);
  }
}

function toggleNumero(n, el) {
  const idx = selecionados.indexOf(n);
  if (idx === -1) {
    if (selecionados.length >= TOTAL) return;
    selecionados.push(n);
    el.classList.add("sel");
  } else {
    selecionados.splice(idx,1);
    el.classList.remove("sel");
  }
  cont.innerText = `${selecionados.length} / ${TOTAL}`;
}

function modoAutomatico() {
  const nums = [];
  while (nums.length < TOTAL) {
    const r = Math.floor(Math.random()*75)+1;
    if (!nums.includes(r)) nums.push(r);
  }
  adicionarCarrinho(nums);
}

function salvarCartela() {
  if (selecionados.length !== TOTAL) {
    alert("Selecione 30 números");
    return;
  }
  adicionarCarrinho(selecionados);
  selecionados = [];
  manual.classList.add("hidden");
  carrinhoDiv();
}

function adicionarCarrinho(nums) {
  carrinho.push({
    id: "CART-" + Date.now(),
    numeros: nums
  });
  carrinhoDiv();
}

function carrinhoDiv() {
  carrinhoDiv = document.getElementById("carrinho");
  carrinhoDiv.classList.remove("hidden");
  lista.innerHTML = "";
  carrinho.forEach(c => {
    lista.innerHTML += `<p>ID: ${c.id} (${c.numeros.length} números)</p>`;
  });
}

function finalizar() {
  localStorage.setItem("cartelasCompradas", JSON.stringify(carrinho));
  alert("Compra finalizada com sucesso!");
}
</script>

</body>
</html>
